<mvc:View
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns:macros="sap.fe.macros"
    xmlns:html="http://www.w3.org/1999/xhtml"
    controllerName="appiuimodule.controllers.InvoiceDetails">
    <Page
        id="InvoiceDetails"
        title="{i18n>invoiceDetailsTitle}"
        showNavButton="true"
        navButtonPress=".onNavBack">
        <customHeader>
            <core:Fragment fragmentName="appiuimodule.views.Header" type="XML" />
        </customHeader>
        <content class="sapUiSmallMarginBottom sapUiMediumMarginBegin sapUiMediumMarginEnd">

            <!-- Invoice Details Card -->
            <VBox class="sapUiResponsiveMargin sapUiMediumMarginTop">
                <f:Card id="invoiceCard">
                    <f:header>
                        <card:Header
                            title="{i18n>invoiceDetailsTitle}"
                            iconSrc="sap-icon://document" />
                    </f:header>
                    <f:content>
                        <VBox class="sapUiResponsiveMargin" width="100%">
                            <HBox justifyContent="End" class="sapUiSmallMarginBottom">
                                <core:Fragment
                                    fragmentName="appiuimodule.views.CustomerDetailsButton"
                                    type="XML" />
                            </HBox>
                            <HBox wrap="Wrap" width="100%"
                                justifyContent="SpaceBetween">
                                <!-- Left Column -->
                                <VBox width="48%">
                                    <List items="{path: 'invoiceModel>/invoiceDetails', length: 6}"
                                        class="sapUiSizeCompact" width="100%">
                                        <StandardListItem
                                            title="{invoiceModel>label}"
                                            info="{invoiceModel>value}" />
                                    </List>
                                </VBox>

                                <!-- Right Column -->
                                <VBox width="48%">
                                    <List
                                        items="{path: 'invoiceModel>/invoiceDetails', startIndex: 6}"
                                        class="sapUiSizeCompact" width="100%">
                                        <StandardListItem
                                            title="{invoiceModel>label}"
                                            info="{invoiceModel>value}" />
                                    </List>
                                </VBox>
                            </HBox>
                        </VBox>
                    </f:content>
                </f:Card>
            </VBox>

            <!-- Products Card with Fixed Height -->
            <VBox class="sapUiResponsiveMargin sapUiLargeMarginTop">
                <f:Card height="450px">
                    <f:header>
                        <card:Header
                            title="{i18n>productsInOrderTitle}"
                            subtitle="Products in this order">
                        </card:Header>
                    </f:header>
                    <f:content>
                        <VBox class="sapUiResponsiveMargin" width="100%">
                            <!-- Single Table with Programmatic Sticky Headers -->
                            <ScrollContainer height="340px" vertical="true" horizontal="false">
                                <Table
                                    id="productsTable"
                                    items="{ path: 'productsModel>/products' }"
                                    width="100%"
                                    showNoData="false"
                                    mode="None"
                                    busyIndicatorDelay="0">
                                    <columns>
                                        <Column width="12em">
                                            <Text text="{i18n>productNameColumn}" />
                                        </Column>
                                        <Column width="6em">
                                            <Text text="{i18n>quantityLabel}" />
                                        </Column>
                                        <Column width="8em">
                                            <Text text="{i18n>unitPriceLabel}" />
                                        </Column>
                                        <Column width="6em">
                                            <Text text="{i18n>discountLabel}" />
                                        </Column>
                                        <Column width="8em">
                                            <Text text="{i18n>extendedPriceLabel}" />
                                        </Column>
                                    </columns>
                                    <items>
                                        <ColumnListItem>
                                            <cells>
                                                <Text text="{productsModel>ProductName}" />
                                                <Text text="{productsModel>Quantity}" />
                                                <Text
                                                    text="{
                                                    parts: ['productsModel>UnitPrice'],
                                                    formatter: '.formatCurrency'
                                                }" />
                                                <Text
                                                    text="{
                                                    parts: ['productsModel>Discount'],
                                                    formatter: '.formatDiscount'
                                                }" />
                                                <Text
                                                    text="{
                                                    parts: ['productsModel>ExtendedPrice'],
                                                    formatter: '.formatCurrency'
                                                }" />
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </ScrollContainer>
                        </VBox>
                    </f:content>
                </f:Card>
            </VBox>

        </content>
        <footer>
            <core:Fragment fragmentName="appiuimodule.views.Footer" type="XML" />
        </footer>
    </Page>
</mvc:View>
<mvc:View
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns:macros="sap.fe.macros"
    xmlns:html="http://www.w3.org/1999/xhtml"
    controllerName="appiuimodule.controllers.OrderDetails">

    <f:DynamicPage
        id="OrderDetailsDynamicPage"
        showFooter="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <HBox>
                        <Button type="Transparent" icon="sap-icon://nav-back"
                            press=".onNavBack" />
                        <Title class="sapUiTinyMarginTop sapUiSmallMarginBegin"
                            text="{i18n>DetailsTitle}" />
                    </HBox>
                </f:heading>
                <f:actions>
                    <core:Fragment fragmentName="appiuimodule.views.HeaderButtons" type="XML" />
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:content>
            <VBox renderType="Bare" class="sapUiResponsiveMargin sapUiMediumMarginTop">
                <f:Card renderType="Bare" id="orderCard" class="sapUiContentPadding">
                    <f:header>
                        <card:Header
                            title="{i18n>generalInformationLabel}"
                            iconSrc="sap-icon://order-status" />
                    </f:header>
                    <f:content>
                        <VBox width="100%">
                            <HBox justifyContent="End" class="sapUiSmallMarginBottom">
                                <core:Fragment
                                    fragmentName="appiuimodule.views.CustomerDetailsButton"
                                    type="XML" />
                            </HBox>
                            <VBox wrap="Wrap" width="100%"
                                justifyContent="SpaceBetween">

                                <HBox justifyContent="SpaceBetween" wrap="Wrap">
                                    <!-- Left Column -->
                                    <VBox width="45%">
                                        <List class="sapUiSizeCompact" width="100%">
                                            <StandardListItem
                                                title="{i18n>orderIdColumn}"
                                                info="{orderModel>/OrderID}" />
                                            <StandardListItem
                                                title="{i18n>taskTypeLabel}"
                                                info="{i18n>orderTaskTypeValue}" />
                                            <StandardListItem
                                                title="{i18n>customerIdColumn}"
                                                info="{orderModel>/CustomerID}"
                                                type="Navigation"
                                                press=".onGoToCustomerDetails" />
                                            <StandardListItem
                                                title="{i18n>orderDateColumn}"
                                                info="{path: 'orderModel>/OrderDate', formatter: '.formatDate'}" />
                                        </List>
                                    </VBox>

                                    <!-- Right Column -->
                                    <VBox width="45%">
                                        <List class="sapUiSizeCompact" width="100%">
                                            <StandardListItem
                                                title="{i18n>shippedDateLabel}"
                                                info="{parts: ['orderModel>/ShippedDate', 'orderModel>/Status'], formatter: '.formatter.formatShippedDate'}" />
                                            <StandardListItem
                                                title="{i18n>countryLabel}"
                                                info="{orderModel>/ShipCountry}" />
                                            <StandardListItem
                                                title="{i18n>cityLabel}"
                                                info="{orderModel>/ShipCity}" />
                                            <StandardListItem
                                                title="{i18n>statusLabel}"
                                                info="{orderModel>/Status}"
                                                infoState="{path: 'orderModel>/Status', formatter: '.formatter.formatStatusState'}" />
                                        </List>
                                    </VBox>
                                </HBox>

                                <VBox class="sapUiLargeMarginTop" justifyContent="Start"
                                    visible="{= !!${orderModel>/RejectionReason} }">
                                    <MessageStrip
                                        text="{i18n>rejectionReasonPrefix} {orderModel>/RejectionReason}"
                                        type="Error"
                                        class="sapUiMediumMarginBottom">
                                    </MessageStrip>
                                </VBox>
                            </VBox>
                        </VBox>
                    </f:content>
                </f:Card>
            </VBox>
        </f:content>
        <f:footer>
            <Toolbar>
                <ToolbarSpacer /> <!-- pushes buttons to the right -->
                <Button
                    id="ApproveButton"
                    icon="sap-icon://accept"
                    text="{i18n>Approve}"
                    enabled="{= ${orderModel>/Status} === 'Pending' }"
                    press=".onApprove" />
                <Button
                    id="DeclineButton"
                    icon="sap-icon://decline"
                    text="{i18n>Decline}"
                    enabled="{= ${orderModel>/Status} === 'Pending' }"
                    press=".onDecline" />
            </Toolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
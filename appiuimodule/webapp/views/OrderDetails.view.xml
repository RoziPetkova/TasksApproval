<mvc:View
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns:macros="sap.fe.macros"
    xmlns:html="http://www.w3.org/1999/xhtml"
    controllerName="appiuimodule.controllers.OrderDetails">

    <f:DynamicPage
        id="OrderDetailsDynamicPage"
        showFooter="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <HBox>
                        <Button type="Transparent" icon="sap-icon://nav-back"
                            press=".onNavBack" />
                        <Title class="sapUiTinyMarginTop sapUiSmallMarginBegin"
                            text="{i18n>DetailsTitle}" />
                    </HBox>
                </f:heading>
                <f:actions>
                    <core:Fragment fragmentName="appiuimodule.views.HeaderButtons" type="XML" />
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:content>
            <VBox renderType="Bare" class="sapUiResponsiveMargin sapUiMediumMarginTop">
                <f:Card renderType="Bare" id="orderCard" class="sapUiContentPadding">
                    <f:header>
                        <card:Header
                            title="{i18n>generalInformationLabel}"
                            iconSrc="sap-icon://order-status" />
                    </f:header>
                    <f:content>
                        <VBox width="100%">
                            <HBox justifyContent="End" class="sapUiSmallMarginBottom">
                                <core:Fragment
                                    fragmentName="appiuimodule.views.CustomerDetailsButton"
                                    type="XML" />
                            </HBox>
                            <VBox wrap="Wrap" width="100%"
                                justifyContent="SpaceBetween">

                                <HBox justifyContent="SpaceBetween" wrap="Wrap">
                                    <!-- Left Column -->
                                    <VBox width="45%">
                                        <List items="{path: 'orderModel>/taskDetails', length: 4}"
                                            class="sapUiSizeCompact" width="100%">
                                            <StandardListItem
                                                title="{orderModel>label}"
                                                info="{orderModel>value}"
                                                type="{path: 'orderModel>label', formatter: '.formatCustomerRowType'}"
                                                press=".onCustomerRowPress" />
                                        </List>
                                    </VBox>

                                    <!-- Right Column -->
                                    <VBox width="45%">
                                        <List
                                            items="{path: 'orderModel>/taskDetails', startIndex: 4, filters: [{path: 'label', operator: 'NE', value1: 'RejectionReason'}]}"
                                            class="sapUiSizeCompact" width="100%">
                                            <StandardListItem
                                                title="{orderModel>label}"
                                                info="{orderModel>value}"
                                                infoState="{parts: ['orderModel>label', 'orderModel>value'], formatter: '.formatStatusColor'}" />
                                        </List>
                                    </VBox>
                                </HBox>

                                <VBox class="sapUiLargeMarginTop" justifyContent="Start"
                                    visible="{= !!${orderModel>/taskDetails/8/value} }">
                                    <MessageStrip
                                        text="Rejection reason: {orderModel>/taskDetails/8/value}"
                                        type="Error"
                                        class="sapUiMediumMarginBottom">
                                    </MessageStrip>
                                </VBox>
                            </VBox>
                        </VBox>
                    </f:content>
                </f:Card>
            </VBox>
        </f:content>
        <f:footer>
            <Toolbar>
                <ToolbarSpacer /> <!-- pushes buttons to the right -->
                <Button
                    id="ApproveButton"
                    icon="sap-icon://accept"
                    text="{i18n>Approve}"
                    enabled="{= ${orderModel>/taskDetails/7/value} === 'Pending' }"
                    press=".onApprove" />
                <Button
                    id="DeclineButton"
                    icon="sap-icon://decline"
                    text="{i18n>Decline}"
                    enabled="{= ${orderModel>/taskDetails/7/value} === 'Pending' }"
                    press=".onDecline" />
            </Toolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>